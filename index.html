<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>MOC Truppenrechner</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background: #fff;
      color: #000;
    }
    h1 {
      text-align: center;
    }
    .lang-select {
      position: absolute;
      top: 10px;
      left: 10px;
    }
    .refresh-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      border: none;
      background: transparent;
      font-size: 20px;
      cursor: pointer;
    }
    label {
      display: block;
      margin-top: 10px;
    }
    input {
      width: 200px;
      padding: 5px;
      margin-top: 5px;
    }
    input[readonly] {
      background: #f0f0f0;
    }
    .tooltip {
      cursor: pointer;
      margin-left: 5px;
    }
    .popup {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      border: 1px solid #ccc;
      padding: 20px;
      z-index: 1000;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    .popup img {
      max-width: 300px;
      display: block;
      margin-bottom: 10px;
    }
    .popup button {
      margin-top: 10px;
    }
    .buttons {
      margin-top: 20px;
    }
    .calc-btn {
      background: green;
      color: white;
      border: none;
      padding: 10px 20px;
      margin-right: 10px;
      cursor: pointer;
    }
    .reset-btn {
      background: red;
      color: white;
      border: none;
      padding: 10px 20px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <select id="lang" class="lang-select" onchange="setLang(this.value)">
    <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
    <option value="en">ğŸ‡¬ğŸ‡§ English</option>
    <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
    <option value="it">ğŸ‡®ğŸ‡¹ Italiano</option>
    <option value="ar">ğŸ‡¦ğŸ‡ª Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
  </select>
  <button class="refresh-btn" onclick="location.reload()">ğŸ”„</button>

  <h1 id="title">MOC Truppenrechner</h1>

  <form id="calcForm">
    <label id="lbl-truppen">Anzahl Truppen</label>
    <input type="number" id="truppen" />

    <label id="lbl-maersche">Anzahl MÃ¤rsche</label>
    <input type="number" id="maersche" />

    <label id="lbl-haustier">Haustier Buff
      <span class="tooltip" onclick="showPopup('pet')">â„¹ï¸</span>
    </label>
    <input type="number" id="haustier" />

    <label id="lbl-cyril">Cyrille Buff
      <span class="tooltip" onclick="showPopup('cyril')">â„¹ï¸</span>
    </label>
    <input type="number" id="cyril" />

    <label id="lbl-schwadron">Schwadronen GrÃ¶sse</label>
    <input type="number" id="schwadron" />

    <label id="lbl-zw1">Anzahl Truppen pro Marsch</label>
    <input type="number" id="zw1" readonly />

    <label id="lbl-zw2">Totale SchwadronengrÃ¶sse</label>
    <input type="number" id="zw2" readonly />

    <label id="lbl-result">Endergebnis (%)</label>
    <input type="text" id="result" readonly />
  </form>

  <div class="buttons">
    <button type="button" class="calc-btn" id="btn-calc" onclick="calculate()">Berechnen</button>
    <button type="button" class="reset-btn" id="btn-reset" onclick="document.getElementById('calcForm').reset();">ZurÃ¼cksetzen</button>
  </div>

  <!-- Popups -->
  <div id="popup-pet" class="popup">
    <img src="Haustierbuff.jpg" alt="Haustier Buff">
    <p id="pet-text">Haustier Buff: VerstÃ¤rkt die Armee und erhÃ¶ht die KapazitÃ¤t.</p>
    <button onclick="closePopup('pet')">OK</button>
  </div>

  <div id="popup-cyril" class="popup">
    <img src="Cyrille Buff.jpg" alt="Cyrille Buff">
    <p id="cyril-text">Cyrille Buff: ErhÃ¶ht die TruppenkapazitÃ¤t in bestimmten Events.</p>
    <button onclick="closePopup('cyril')">OK</button>
  </div>

  <script>
    const dict = {
      de: {
        title: "MOC Truppenrechner",
        labels: {
          truppen: "Anzahl Truppen",
          maersche: "Anzahl MÃ¤rsche",
          haustier: "Haustier Buff",
          cyril: "Cyrille Buff",
          schwadron: "Schwadronen GrÃ¶sse",
          zw1: "Anzahl Truppen pro Marsch",
          zw2: "Totale SchwadronengrÃ¶sse",
          result: "Endergebnis (%)"
        },
        buttons: { calc: "Berechnen", reset: "ZurÃ¼cksetzen" },
        pet: "Haustier Buff: VerstÃ¤rkt die Armee und erhÃ¶ht die KapazitÃ¤t.",
        cyrilText: "Cyrille Buff: ErhÃ¶ht die TruppenkapazitÃ¤t in bestimmten Events."
      },
      en: {
        title: "MOC Troop Calculator",
        labels: {
          truppen: "Number of Troops",
          maersche: "Number of Marches",
          haustier: "Pet Buff",
          cyril: "Cyrille Buff",
          schwadron: "Squad Size",
          zw1: "Troops per March",
          zw2: "Total Squad Size",
          result: "Final Result (%)"
        },
        buttons: { calc: "Calculate", reset: "Reset" },
        pet: "Pet Buff: Strengthens the army and increases capacity.",
        cyrilText: "Cyrille Buff: Increases troop capacity in certain events."
      },
      fr: {
        title: "Calculateur de troupes MOC",
        labels: {
          truppen: "Nombre de troupes",
          maersche: "Nombre de marches",
          haustier: "Bonus animal de compagnie",
          cyril: "Bonus Cyrille",
          schwadron: "Taille de l'escadron",
          zw1: "Troupes par marche",
          zw2: "Taille totale de l'escadron",
          result: "RÃ©sultat final (%)"
        },
        buttons: { calc: "Calculer", reset: "RÃ©initialiser" },
        pet: "Bonus animal de compagnie : Renforce l'armÃ©e et augmente la capacitÃ©.",
        cyrilText: "Bonus Cyrille : Augmente la capacitÃ© des troupes lors de certains Ã©vÃ©nements."
      },
      it: {
        title: "Calcolatore truppe MOC",
        labels: {
          truppen: "Numero di truppe",
          maersche: "Numero di marce",
          haustier: "Bonus animale domestico",
          cyril: "Bonus Cyrille",
          schwadron: "Dimensione della squadra",
          zw1: "Truppe per marcia",
          zw2: "Dimensione totale della squadra",
          result: "Risultato finale (%)"
        },
        buttons: { calc: "Calcola", reset: "Reimposta" },
        pet: "Bonus animale domestico: Rafforza l'esercito e aumenta la capacitÃ .",
        cyrilText: "Bonus Cyrille: Aumenta la capacitÃ  delle truppe in determinati eventi."
      },
      ar: {
        title: "Ø­Ø§Ø³Ø¨Ø© Ù‚ÙˆØ§Øª MOC",
        labels: {
          truppen: "Ø¹Ø¯Ø¯ Ø§Ù„Ù‚ÙˆØ§Øª",
          maersche: "Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ÙŠØ±Ø§Øª",
          haustier: "ØªØ¹Ø²ÙŠØ² Ø§Ù„Ø­ÙŠÙˆØ§Ù† Ø§Ù„Ø£Ù„ÙŠÙ",
          cyril: "ØªØ¹Ø²ÙŠØ² Ø³ÙŠØ±ÙŠÙ„",
          schwadron: "Ø­Ø¬Ù… Ø§Ù„Ø³Ø±Ø¨",
          zw1: "Ø¹Ø¯Ø¯ Ø§Ù„Ù‚ÙˆØ§Øª Ù„ÙƒÙ„ Ù…Ø³ÙŠØ±Ø©",
          zw2: "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø­Ø¬Ù… Ø§Ù„Ø³Ø±Ø¨",
          result: "Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© (%)"
        },
        buttons: { calc: "Ø§Ø­Ø³Ø¨", reset: "Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†" },
        pet: "ØªØ¹Ø²ÙŠØ² Ø§Ù„Ø­ÙŠÙˆØ§Ù† Ø§Ù„Ø£Ù„ÙŠÙ: ÙŠÙ‚ÙˆÙŠ Ø§Ù„Ø¬ÙŠØ´ ÙˆÙŠØ²ÙŠØ¯ Ø§Ù„Ø³Ø¹Ø©.",
        cyrilText: "ØªØ¹Ø²ÙŠØ² Ø³ÙŠØ±ÙŠÙ„: ÙŠØ²ÙŠØ¯ Ù…Ù† Ø³Ø¹Ø© Ø§Ù„Ù‚ÙˆØ§Øª ÙÙŠ Ø£Ø­Ø¯Ø§Ø« Ù…Ø¹ÙŠÙ†Ø©."
      }
    };

    function setLang(lang) {
      const d = dict[lang];
      document.getElementById('title').innerText = d.title;
      document.getElementById('lbl-truppen').innerText = d.labels.truppen;
      document.getElementById('lbl-maersche').innerText = d.labels.maersche;
      document.getElementById('lbl-haustier').childNodes[0].nodeValue = d.labels.haustier + " ";
      document.getElementById('lbl-cyril').childNodes[0].nodeValue = d.labels.cyril + " ";
      document.getElementById('lbl-schwadron').innerText = d.labels.schwadron;
      document.getElementById('lbl-zw1').innerText = d.labels.zw1;
      document.getElementById('lbl-zw2').innerText = d.labels.zw2;
      document.getElementById('lbl-result').innerText = d.labels.result;
      document.getElementById('btn-calc').innerText = d.buttons.calc;
      document.getElementById('btn-reset').innerText = d.buttons.reset;
      document.getElementById('pet-text').innerText = d.pet;
      document.getElementById('cyril-text').innerText = d.cyrilText;
      document.body.dir = (lang === "ar") ? "rtl" : "ltr";
    }

    function calculate() {
      const truppen = parseFloat(document.getElementById('truppen').value) || 0;
      const maersche = parseFloat(document.getElementById('maersche').value) || 1;
      const haustier = parseFloat(document.getElementById('haustier').value) || 0;
      const cyril = parseFloat(document.getElementById('cyril').value) || 0;
      const schwadron = parseFloat(document.getElementById('schwadron').value) || 0;

      const zw1 = truppen / maersche;
      document.getElementById('zw1').value = zw1.toFixed(2);

      const zw2 = haustier + cyril + schwadron;
      document.getElementById('zw2').value = zw2.toFixed(2);

      const result = (100 / zw2) * zw1;
      document.getElementById('result').value = result.toFixed(2) + "%";
    }

    function showPopup(which) {
      document.getElementById('popup-' + which).style.display = 'block';
    }
    function closePopup(which) {
      document.getElementById('popup-' + which).style.display = 'none';
    }

    // Standard auf Deutsch setzen
    setLang('de');
  </script>
</body>
</html>
